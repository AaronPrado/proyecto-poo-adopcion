{% extends "base.html" %}

{% block title %}{{ mascota.nombre }} - Portal de Adopción{% endblock %}

{% block content %}
<div class="row mb-3">
    <div class="col-12">
        <a href="{{ url_for('mascotas.catalogo') }}" class="btn btn-light">
            ← Volver al catálogo
        </a>
    </div>
</div>

<div class="row">
    <!-- Imagen de la mascota -->
    <div class="col-md-5">
        <div class="card">
            {% if mascota.foto_url %}
                <img src="{{ mascota.foto_url }}" class="card-img-top mascota-detail-img" alt="{{ mascota.nombre }}">
            {% else %}
                <img src="https://placehold.co/400x400/8ecae6/023047?text={{ mascota.especie }}"
                     class="card-img-top mascota-detail-img" alt="{{ mascota.nombre }}">
            {% endif %}
        </div>
    </div>

    <!-- Información de la mascota -->
    <div class="col-md-7">
        <div class="card">
            <div class="card-body">
                <h2 class="card-title">{{ mascota.nombre }}</h2>

                <!-- Estado -->
                {% if mascota.estado == 'disponible' %}
                    <span class="badge bg-success mb-3">Disponible para adopción</span>
                {% elif mascota.estado == 'en_proceso' %}
                    <span class="badge bg-warning text-dark mb-3">En proceso de adopción</span>
                {% else %}
                    <span class="badge bg-secondary mb-3">Adoptado</span>
                {% endif %}

                <!-- Características principales -->
                <h5 class="mt-3">Características</h5>
                <table class="table table-borderless">
                    <tbody>
                        <tr>
                            <th style="width: 40%;">Especie:</th>
                            <td>{{ mascota.especie }}</td>
                        </tr>
                        {% if mascota.raza %}
                        <tr>
                            <th>Raza:</th>
                            <td>{{ mascota.raza }}</td>
                        </tr>
                        {% endif %}
                        {% if mascota.edad_aprox %}
                        <tr>
                            <th>Edad aproximada:</th>
                            <td>{{ mascota.edad_aprox }} {% if mascota.edad_aprox == 1 %}año{% else %}años{% endif %}</td>
                        </tr>
                        {% endif %}
                        {% if mascota.sexo %}
                        <tr>
                            <th>Sexo:</th>
                            <td>{{ mascota.sexo }}</td>
                        </tr>
                        {% endif %}
                        {% if mascota.tamano %}
                        <tr>
                            <th>Tamaño:</th>
                            <td>{{ mascota.tamano }}</td>
                        </tr>
                        {% endif %}
                        <tr>
                            <th>Vacunado:</th>
                            <td>{% if mascota.vacunado %}Sí ✓{% else %}No{% endif %}</td>
                        </tr>
                        <tr>
                            <th>Esterilizado:</th>
                            <td>{% if mascota.esterilizado %}Sí ✓{% else %}No{% endif %}</td>
                        </tr>
                    </tbody>
                </table>

                <!-- Descripción -->
                <h5 class="mt-4">Sobre {{ mascota.nombre }}</h5>
                <p class="card-text">{{ mascota.descripcion }}</p>

                <!-- Botón de adopción (si está disponible) -->
                {% if mascota.estado == 'disponible' %}
                    <div class="mt-4">
                        {% if current_user.is_authenticated %}
                            <a href="{{ url_for('solicitudes.nueva', mascota_id=mascota.id) }}" class="btn btn-primary btn-lg w-100">
                                Solicitar Adopción
                            </a>
                            <small class="text-muted d-block mt-2">
                                Deberás completar un cuestionario de adopción
                            </small>
                        {% else %}
                            <a href="{{ url_for('auth.login') }}" class="btn btn-primary btn-lg w-100">
                                Inicia sesión para adoptar
                            </a>
                        {% endif %}
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}